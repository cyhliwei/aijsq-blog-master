<!-- blog/mojian-server/src/main/resources/templates/seo/category.html -->
<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <th:block th:if="${current == 1}">
        <title th:text="${category.name} + ' - ' + ${webConfig.name}">分类名 - 网站名称</title>
        <meta name="description" th:content="'浏览' + ${category.name} + '分类下的所有文章'">
    </th:block>

    <th:block th:if="${current > 1}">
        <title th:text="${category.name} + ' - 第' + ${current} + '页'">分类名 - 第X页</title>
        <meta name="robots" content="noindex, follow">
    </th:block>

    <link rel="canonical" th:if="${current == 1}" th:href="'https://' + ${#httpServletRequest.serverName} + '/seo-category/' + ${category.id}">
    <link rel="canonical" th:if="${current > 1}" th:href="'https://' + ${#httpServletRequest.serverName} + '/seo-category/' + ${category.id} + '?page=' + ${current}">

    <link rel="prev" th:if="${current > 1}"
          th:href="'/seo-category/' + ${category.id} + ${current > 2 ? '?page=' + (current - 1) : ''}">
    <link rel="next" th:if="${total > current * 10}"
          th:href="'/seo-category/' + ${category.id} + '?page=' + (current + 1)">

    <style>
        /* 使用首页相同样式 */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 300px; gap: 30px; }
        @media (max-width: 768px) { .container { grid-template-columns: 1fr; } }
        header { background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .breadcrumb { color: #666; margin-bottom: 20px; font-size: 0.9em; }
        .breadcrumb a { color: #007bff; text-decoration: none; }
        .article-list { display: grid; gap: 20px; }
        .article-item { background: #fff; padding: 20px; border-radius: 8px; }
        .article-item a { color: #333; text-decoration: none; }
        .pagination { background: #fff; padding: 20px; border-radius: 8px; margin-top: 20px; display: flex; justify-content: center; gap: 10px; }
        .pagination a { padding: 8px 16px; text-decoration: none; color: #333; }
        .pagination .current { background: #007bff; color: #fff; padding: 8px 16px; }
    </style>
</head>
<body>
<header>
    <h1><a href="/" th:text="${webConfig.name}">网站名称</a></h1>
    <div class="breadcrumb">
        <a href="/">首页</a> &gt; <span th:text="${category.name}">分类名</span>
    </div>
</header>

<div class="container">
    <main>
        <h2 th:text="${category.name} + ' (' + ${total} + ')'">分类名 (100)</h2>

        <div class="article-list">
            <article class="article-item" th:each="article : ${articles}">
                <a th:href="'/seo-posts/' + ${article.id}">
                    <h3 th:text="${article.title}">文章标题</h3>
                    <p th:text="${#strings.abbreviate(article.summary, 150)}">摘要</p>
                    <small th:text="${#temporals.format(article.createTime, 'yyyy-MM-dd')}">时间</small>
                </a>
            </article>
        </div>

        <!-- 分页组件 -->
        <div class="pagination" th:if="${total > 10}">
            <a th:if="${current > 1}"
               th:href="'/seo-category/' + ${category.id} + ${current > 2 ? '?page=' + (current - 1) : ''}">
                &laquo; 上一页
            </a>

            <th:block th:with="totalPages=${#numbers.formatDecimal((total + 9) / 10, 1, 0)}">
                <th:block th:each="i : ${#numbers.sequence(1, totalPages)}">
                    <a th:if="${i != current}"
                       th:href="'/seo-category/' + ${category.id} + (i > 1 ? '?page=' + i : '')"
                       th:text="${i}">1</a>
                    <span class="current" th:if="${i == current}" th:text="${i}">1</span>
                </th:block>
            </th:block>

            <a th:if="${total > current * 10}"
               th:href="'/seo-category/' + ${category.id} + '?page=' + (current + 1)">
                下一页 &raquo;
            </a>
        </div>
    </main>
</div>

<script>
    // const isBot = /bot|crawl|spider/i.test(navigator.userAgent);
    // if (!isBot) {
    //     window.location.href = window.location.pathname + window.location.search;
    // }
</script>
</body>
</html>