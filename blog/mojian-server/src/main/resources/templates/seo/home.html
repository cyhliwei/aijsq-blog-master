<!-- blog/mojian-server/src/main/resources/templates/seo/home.html -->
<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO 标签 -->
    <th:block th:if="${current == 1}">
        <title th:text="${webConfig.name} + ' - ' + ${webConfig.summary}">网站名称</title>
        <meta name="description" th:content="${webConfig.summary}">
    </th:block>

    <th:block th:if="${current > 1}">
        <title th:text="'第 ' + ${current} + ' 页 - ' + ${webConfig.name}">第X页</title>
        <meta name="description" th:content="${webConfig.name} + ' - 第' + ${current} + '页'">
        <meta name="robots" content="noindex, follow">
    </th:block>

    <link rel="canonical" th:if="${current == 1}" th:href="'https://' + ${#httpServletRequest.serverName}">
    <link rel="canonical" th:if="${current > 1}" th:href="'https://' + ${#httpServletRequest.serverName} + '/?page=' + ${current}">

    <link rel="prev" th:if="${current > 1}"
          th:href="'https://' + ${#httpServletRequest.serverName} + ${current > 2 ? '/?page=' + (current - 1) : ''}">
    <link rel="next" th:if="${current < totalPages}"
          th:href="'https://' + ${#httpServletRequest.serverName} + '/?page=' + (current + 1)">

    <style>
        /* 保持原有的样式 */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 300px; gap: 30px; }
        @media (max-width: 768px) { .container { grid-template-columns: 1fr; } }
        header { background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        header nav a { color: #333; text-decoration: none; margin-right: 20px; }
        header nav a:hover { color: #007bff; }
        .article-list { display: grid; gap: 20px; }
        .article-item { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .article-item a { color: #333; text-decoration: none; }
        .article-item h2 { margin: 0 0 10px 0; }
        .article-item .summary { color: #666; margin-bottom: 15px; }
        .article-item .meta { color: #999; font-size: 0.9em; display: flex; gap: 15px; }
        .pagination { background: #fff; padding: 20px; border-radius: 8px; margin-top: 20px; display: flex; justify-content: center; align-items: center; gap: 8px; }
        .pagination a, .pagination span { padding: 8px 14px; border-radius: 4px; text-decoration: none; }
        .pagination a:hover { background: #f0f0f0; }
        .pagination .current { background: #007bff; color: #fff; }
        .pagination .disabled { color: #ccc; cursor: not-allowed; }
        .widget { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .widget h3 { margin: 0 0 15px 0; padding-bottom: 10px; border-bottom: 2px solid #007bff; }
        .widget ul { list-style: none; padding: 0; margin: 0; }
        .widget ul li { padding: 8px 0; border-bottom: 1px solid #f0f0f0; }
        .widget ul li a { color: #333; text-decoration: none; }
    </style>
</head>
<body>
<header>
    <h1><a href="/" th:text="${webConfig.name}">网站名称</a></h1>
    <nav>
        <a href="/">首页</a>
        <a th:each="cat : ${categories}" th:href="'/seo-category/' + ${cat.id}" th:text="${cat.name}">分类</a>
    </nav>
</header>

<div class="container">
    <main>
        <div class="article-list">
            <article class="article-item" th:each="article : ${articles}">
                <a th:href="'/seo-posts/' + ${article.id}">
                    <h2 th:text="${article.title}">文章标题</h2>
                    <p class="summary" th:text="${#strings.abbreviate(article.summary, 150)}">摘要</p>
                    <div class="meta">
                            <span th:if="${article.category}">
                                <a th:href="'/seo-category/' + ${article.category.id}" th:text="${article.category.name}">分类</a>
                            </span>
                        <span th:text="${#temporals.format(article.createTime, 'yyyy-MM-dd')}">时间</span>
                        <span th:text="'阅读 ' + ${article.quantity} + ' 次'">阅读量</span>
                    </div>
                </a>
            </article>
        </div>

        <!-- 分页组件 -->
        <div class="pagination" th:if="${totalPages > 1}">
            <!-- 上一页 -->
            <a th:if="${current > 1}" th:href="${current > 2 ? '/?page=' + (current - 1) : '/'}">
                &laquo; 上一页
            </a>
            <span class="disabled" th:if="${current <= 1}">
                    &laquo; 上一页
                </span>

            <!-- 总页数小于等于7，显示全部页码 -->
            <th:block th:if="${totalPages <= 7}">
                <th:block th:each="i : ${#numbers.sequence(1, totalPages)}">
                    <a th:if="${i != current}" th:href="${i > 1 ? '/?page=' + i : '/'}" th:text="${i}">1</a>
                    <span class="current" th:if="${i == current}" th:text="${i}">1</span>
                </th:block>
            </th:block>

            <!-- 总页数大于7，显示省略号 -->
            <th:block th:if="${totalPages > 7}">
                <!-- 第1页 -->
                <a th:if="${current != 1}" href="/">1</a>
                <span class="current" th:if="${current == 1}">1</span>

                <!-- 前面省略号 -->
                <span th:if="${current > 4}">...</span>

                <!-- 当前页附近的页码 -->
                <th:block th:each="i : ${#numbers.sequence(
                        #numbers.max(2, current - 2),
                        #numbers.min(totalPages - 1, current + 2)
                    )}">
                    <a th:if="${i != current}" th:href="'/?page=' + ${i}" th:text="${i}">2</a>
                    <span class="current" th:if="${i == current}" th:text="${i}">2</span>
                </th:block>

                <!-- 后面省略号 -->
                <span th:if="${current < totalPages - 3}">...</span>

                <!-- 最后一页 -->
                <a th:if="${current != totalPages}" th:href="'/?page=' + ${totalPages}" th:text="${totalPages}">10</a>
                <span class="current" th:if="${current == totalPages}" th:text="${totalPages}">10</span>
            </th:block>

            <!-- 下一页 -->
            <a th:if="${current < totalPages}" th:href="'/?page=' + (current + 1)">
                下一页 &raquo;
            </a>
            <span class="disabled" th:if="${current >= totalPages}">
                    下一页 &raquo;
                </span>

            <span th:text="'共 ' + ${total} + ' 篇，' + ${totalPages} + ' 页'">
                    共100篇，10页
                </span>
        </div>
    </main>

    <aside>
        <div class="widget">
            <h3>文章分类</h3>
            <ul>
                <li th:each="cat : ${categories}">
                    <a th:href="'/seo-category/' + ${cat.id}" th:text="${cat.name}">分类名</a>
                </li>
            </ul>
        </div>

        <div class="widget">
            <h3>网站公告</h3>
            <p th:text="${webConfig.bulletin}">公告内容</p>
        </div>
    </aside>
</div>

<footer>
    <p>&copy; <span th:text="${#temporals.format(#temporals.createNow(), 'yyyy')}">2024</span>
        <span th:text="${webConfig.name}">网站名称</span></p>
</footer>

<script>
    // const isBot = /bot|crawl|spider/i.test(navigator.userAgent);
    // if (!isBot) {
    //     window.location.href = window.location.pathname + window.location.search;
    // }
</script>
</body>
</html>